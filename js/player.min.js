function e(e){var r=decodeURIComponent(e);const n=document.createElement("hls-video");n.setAttribute("slot","media"),n.setAttribute("crossorigin",""),n.setAttribute("autoplay",""),n.setAttribute("src",r),t.appendChild(n),document.body.appendChild(t)}let t=document.querySelector("media-controller");var r=window.location.href.split("#")[1];e(r);const n=document.querySelector("hls-video");let a,i=document.querySelector("media-time-display");n.addEventListener("loadedmetadata",(function(){a=t.getAttribute("mediastreamtype")})),n.addEventListener("timeupdate",(function(){if("live"==a){let e=i.getAttribute("mediaseekable"),[,t]=e.split(":"),[r,n]=t.split(".");r=parseFloat(r)||0,n=parseFloat(n)||0;let a=r+n/1e3;i.setAttribute("mediaduration",a)}}));let c=0;function o(){document.querySelector("hls-video").focus()}n.addEventListener("pause",(()=>{c=n.currentTime})),n.addEventListener("play",(()=>{n.currentTime=c,n.currentTime>=n.duration-5&&(n.currentTime=0)})),window.addEventListener("load",o);const d={0:0,1:.1,2:.2,3:.3,4:.4,5:.5,6:.6,7:.7,8:.8,9:.9};function s(e){const t=document.createElement("ul");return e.forEach((e=>{const r=document.createElement("li"),n=document.createElement("code"),a=document.createElement("span"),i=document.createElement("span");i.className="key",i.textContent=e.key,a.className="key-binding",a.appendChild(i),n.appendChild(a),n.insertAdjacentText("beforeend",` ${e.description}`),r.appendChild(n),t.appendChild(r)})),t}const l=[{key:"<",description:"Decrease playback speed by 0.1"},{key:">",description:"Increase playback speed by 0.1"},{key:"-",description:"Decrease playback speed by 0.5"},{key:"+",description:"Increase playback speed by 0.5"},{key:"ArrowDown (↓)",description:"Decrease volume by 0.1"},{key:"ArrowUp (↑)",description:"Increase volume by 0.1"},{key:"ArrowLeft (←)",description:"Seek backward 10 seconds"},{key:"ArrowRight (→)",description:"Seek forward 10 seconds"},{key:"p",description:"Request Picture in Picture"},{key:"P",description:"Exit Picture in Picture"},{key:"j",description:"Seek backward 5 seconds"},{key:"Space / k",description:"Toggle play/pause"},{key:"l",description:"Seek forward 5 seconds"},{key:",",description:"Previous frame"},{key:".",description:"Next frame"},{key:"Home",description:"Seek to the beginning of the video"},{key:"End",description:"Seek to the end of the video"},{key:"0-9",description:"Seek to a percentage of the video"},{key:"Esc",description:"Close keyboard shortcuts"},{key:"?",description:"Toggle keyboard shortcuts"},{key:"f",description:"Toggle fullscreen"},{key:"m",description:"Toggle mute"}],u=document.getElementById("keyboard-shortcuts");u.appendChild(s(l));let y=document.getElementById("keyboard-shortcuts");document.addEventListener("keydown",(function(e){"?"===e.key&&("block"===y.style.display?y.style.display="none":y.style.display="block"),"Escape"===e.key&&(y.style.display="none"),o()}));let p=document.getElementById("close-shortcuts");p.addEventListener("click",(function(){y.style.display="none"})),t.addEventListener("keydown",(e=>{if(e.ctrlKey||e.altKey||e.metaKey)return;if(d.hasOwnProperty(e.key)&&"live"!==a&&(n.currentTime=n.duration*d[e.key]),d.hasOwnProperty(e.key)&&"live"===a){let t=0,r=0;for(let e=0;e<n.buffered.length;e++)if(n.currentTime>=n.buffered.start(e)&&n.currentTime<=n.buffered.end(e)){t=n.buffered.end(e)-n.buffered.start(e),r=e;break}t>0&&(n.currentTime=n.buffered.start(r)+t*d[e.key])}let t;switch(e.key){case">":case"+":n.playbackRate+=">"===e.key?.1:.5,t=Math.round(100*n.playbackRate)/100,n.playbackRate=Math.min(t,10);break;case"<":case"-":n.playbackRate-="<"===e.key?.1:.5,t=Math.round(100*n.playbackRate)/100,n.playbackRate=Math.max(t,.1);break;case"ArrowUp":n.volume=Math.min(n.volume+.1,1);break;case"ArrowDown":n.volume=Math.max(n.volume-.1,0);break;case"p":n.requestPictureInPicture();break;case"P":document.exitPictureInPicture();break;case"J":case"j":e.preventDefault(),n.currentTime-=5,c=n.currentTime;break;case"L":case"l":e.preventDefault(),n.currentTime+=5,c=n.currentTime;break;case",":case".":n.pause(),n.currentTime=c,n.currentTime+=","===e.key?-1/48:1/48,c=n.currentTime;break;case"Home":n.currentTime=0;break;case"End":"live"!==a?n.currentTime=n.duration:n.buffered.length>0&&(n.currentTime=n.buffered.end(n.buffered.length-1))}}));