/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.0.
 * Original file: /npm/media-tracks@0.2.3/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
class e extends Event{track;constructor(e,t){super(e),this.track=t.track}}const t=new WeakMap;function n(e){return t.get(e)??function(e,n){let i=t.get(e);i||t.set(e,i={});return Object.assign(i,n)}(e,{})}function i(t,i){const a=t.videoTracks;n(i).media=t,n(i).renditionSet||(n(i).renditionSet=new Set);const d=n(a).trackSet;d.add(i);const c=d.size-1;c in r.prototype||Object.defineProperty(r.prototype,c,{get(){return[...n(this).trackSet][c]}}),queueMicrotask((()=>{a.dispatchEvent(new e("addtrack",{track:i}))}))}function a(t){const i=n(t).media?.videoTracks;if(!i)return;n(i).trackSet.delete(t),queueMicrotask((()=>{i.dispatchEvent(new e("removetrack",{track:t}))}))}class r extends EventTarget{#e;#t;#n;constructor(){super(),n(this).trackSet=new Set}get#i(){return n(this).trackSet}[Symbol.iterator](){return this.#i.values()}get length(){return this.#i.size}getTrackById(e){return[...this.#i].find((t=>t.id===e))??null}get selectedIndex(){return[...this.#i].findIndex((e=>e.selected))}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&(this.removeEventListener("addtrack",this.#e),this.#e=void 0),"function"==typeof e&&(this.#e=e,this.addEventListener("addtrack",e))}get onremovetrack(){return this.#t}set onremovetrack(e){this.#t&&(this.removeEventListener("removetrack",this.#t),this.#t=void 0),"function"==typeof e&&(this.#t=e,this.addEventListener("removetrack",e))}get onchange(){return this.#n}set onchange(e){this.#n&&(this.removeEventListener("change",this.#n),this.#n=void 0),"function"==typeof e&&(this.#n=e,this.addEventListener("change",e))}}class d extends Event{rendition;constructor(e,t){super(e),this.rendition=t.rendition}}function c(e){return[...n(e).media.videoTracks].filter((e=>e.selected)).flatMap((e=>[...n(e).renditionSet]))}class o extends EventTarget{#a;#r;#n;[Symbol.iterator](){return c(this).values()}get length(){return c(this).length}getRenditionById(e){return c(this).find((t=>`${t.id}`==`${e}`))??null}get selectedIndex(){return c(this).findIndex((e=>e.selected))}set selectedIndex(e){for(const[t,n]of c(this).entries())n.selected=t===e}get onaddrendition(){return this.#a}set onaddrendition(e){this.#a&&(this.removeEventListener("addrendition",this.#a),this.#a=void 0),"function"==typeof e&&(this.#a=e,this.addEventListener("addrendition",e))}get onremoverendition(){return this.#r}set onremoverendition(e){this.#r&&(this.removeEventListener("removerendition",this.#r),this.#r=void 0),"function"==typeof e&&(this.#r=e,this.addEventListener("removerendition",e))}get onchange(){return this.#n}set onchange(e){this.#n&&(this.removeEventListener("change",this.#n),this.#n=void 0),"function"==typeof e&&(this.#n=e,this.addEventListener("change",e))}}class s{src;id;width;height;bitrate;frameRate;codec;#d=!1;get selected(){return this.#d}set selected(e){this.#d!==e&&(this.#d=e,function(e){const t=n(e).media.videoRenditions;t&&!n(t).changeRequested&&(n(t).changeRequested=!0,queueMicrotask((()=>{delete n(t).changeRequested,n(e).track.selected&&t.dispatchEvent(new Event("change"))})))}(this))}}class l{id;kind;label="";language="";sourceBuffer;#d=!1;addRendition(e,t,i,a,r,l){const h=new s;return h.src=e,h.width=t,h.height=i,h.frameRate=l,h.bitrate=r,h.codec=a,function(e,t){const i=n(e).media.videoRenditions;n(t).media=n(e).media,n(t).track=e;const a=n(e).renditionSet;a.add(t);const r=a.size-1;r in o.prototype||Object.defineProperty(o.prototype,r,{get(){return c(this)[r]}}),queueMicrotask((()=>{e.selected&&i.dispatchEvent(new d("addrendition",{rendition:t}))}))}(this,h),h}removeRendition(e){!function(e){const t=n(e).media.videoRenditions,i=n(e).track;n(i).renditionSet.delete(e),queueMicrotask((()=>{n(e).track.selected&&t.dispatchEvent(new d("removerendition",{rendition:e}))}))}(e)}get selected(){return this.#d}set selected(e){this.#d!==e&&(this.#d=e,!0===e&&function(e){const t=n(e).media.videoTracks??[];let i=!1;for(const n of t)n!==e&&(n.selected=!1,i=!0);if(i){if(n(t).changeRequested)return;n(t).changeRequested=!0,queueMicrotask((()=>{delete n(t).changeRequested,t.dispatchEvent(new Event("change"))}))}}(this))}}function h(e){return[...n(e).media.audioTracks].filter((e=>e.enabled)).flatMap((e=>[...n(e).renditionSet]))}class k extends EventTarget{#a;#r;#n;[Symbol.iterator](){return h(this).values()}get length(){return h(this).length}getRenditionById(e){return h(this).find((t=>`${t.id}`==`${e}`))??null}get selectedIndex(){return h(this).findIndex((e=>e.selected))}set selectedIndex(e){for(const[t,n]of h(this).entries())n.selected=t===e}get onaddrendition(){return this.#a}set onaddrendition(e){this.#a&&(this.removeEventListener("addrendition",this.#a),this.#a=void 0),"function"==typeof e&&(this.#a=e,this.addEventListener("addrendition",e))}get onremoverendition(){return this.#r}set onremoverendition(e){this.#r&&(this.removeEventListener("removerendition",this.#r),this.#r=void 0),"function"==typeof e&&(this.#r=e,this.addEventListener("removerendition",e))}get onchange(){return this.#n}set onchange(e){this.#n&&(this.removeEventListener("change",this.#n),this.#n=void 0),"function"==typeof e&&(this.#n=e,this.addEventListener("change",e))}}class u{src;id;bitrate;codec;#d=!1;get selected(){return this.#d}set selected(e){this.#d!==e&&(this.#d=e,function(e){const t=n(e).media.audioRenditions;t&&!n(t).changeRequested&&(n(t).changeRequested=!0,queueMicrotask((()=>{delete n(t).changeRequested,n(e).track.enabled&&t.dispatchEvent(new Event("change"))})))}(this))}}function v(t,i){const a=t.audioTracks;n(i).media=t,n(i).renditionSet||(n(i).renditionSet=new Set);const r=n(a).trackSet;r.add(i);const d=r.size-1;d in b.prototype||Object.defineProperty(b.prototype,d,{get(){return[...n(this).trackSet][d]}}),queueMicrotask((()=>{a.dispatchEvent(new e("addtrack",{track:i}))}))}function g(t){const i=n(t).media?.audioTracks;if(!i)return;n(i).trackSet.delete(t),queueMicrotask((()=>{i.dispatchEvent(new e("removetrack",{track:t}))}))}class b extends EventTarget{#e;#t;#n;constructor(){super(),n(this).trackSet=new Set}get#i(){return n(this).trackSet}[Symbol.iterator](){return this.#i.values()}get length(){return this.#i.size}getTrackById(e){return[...this.#i].find((t=>t.id===e))??null}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&(this.removeEventListener("addtrack",this.#e),this.#e=void 0),"function"==typeof e&&(this.#e=e,this.addEventListener("addtrack",e))}get onremovetrack(){return this.#t}set onremovetrack(e){this.#t&&(this.removeEventListener("removetrack",this.#t),this.#t=void 0),"function"==typeof e&&(this.#t=e,this.addEventListener("removetrack",e))}get onchange(){return this.#n}set onchange(e){this.#n&&(this.removeEventListener("change",this.#n),this.#n=void 0),"function"==typeof e&&(this.#n=e,this.addEventListener("change",e))}}class f{id;kind;label="";language="";sourceBuffer;#c=!1;addRendition(e,t,i){const a=new u;return a.src=e,a.codec=t,a.bitrate=i,function(e,t){const i=n(e).media.audioRenditions;n(t).media=n(e).media,n(t).track=e;const a=n(e).renditionSet;a.add(t);const r=a.size-1;r in k.prototype||Object.defineProperty(k.prototype,r,{get(){return h(this)[r]}}),queueMicrotask((()=>{e.enabled&&i.dispatchEvent(new d("addrendition",{rendition:t}))}))}(this,a),a}removeRendition(e){!function(e){const t=n(e).media.audioRenditions,i=n(e).track;n(i).renditionSet.delete(e),queueMicrotask((()=>{n(e).track.enabled&&t.dispatchEvent(new d("removerendition",{rendition:e}))}))}(e)}get enabled(){return this.#c}set enabled(e){this.#c!==e&&(this.#c=e,function(e){const t=n(e).media.audioTracks;t&&!n(t).changeRequested&&(n(t).changeRequested=!0,queueMicrotask((()=>{delete n(t).changeRequested,t.dispatchEvent(new Event("change"))})))}(this))}}const p=E(globalThis.HTMLMediaElement,"video"),m=E(globalThis.HTMLMediaElement,"audio");function C(e){if(!e?.prototype)return e;const t=E(e,"video");t&&!`${t}`.includes("[native code]")||Object.defineProperty(e.prototype,"videoTracks",{get(){return function(e){let t=n(e).videoTracks;if(!t&&(t=new r,n(e).videoTracks=t,p)){const n=p.call(e.nativeEl??e);for(const t of n)i(e,t);n.addEventListener("change",(()=>{t.dispatchEvent(new Event("change"))})),n.addEventListener("addtrack",(r=>{if([...t].some((e=>e instanceof l)))for(const e of n)a(e);else i(e,r.track)})),n.addEventListener("removetrack",(e=>{a(e.track)}))}return t}(this)}});const d=E(e,"audio");d&&!`${d}`.includes("[native code]")||Object.defineProperty(e.prototype,"audioTracks",{get(){return function(e){let t=n(e).audioTracks;if(!t&&(t=new b,n(e).audioTracks=t,m)){const n=m.call(e.nativeEl??e);for(const t of n)v(e,t);n.addEventListener("change",(()=>{t.dispatchEvent(new Event("change"))})),n.addEventListener("addtrack",(i=>{if([...t].some((e=>e instanceof f)))for(const e of n)g(e);else v(e,i.track)})),n.addEventListener("removetrack",(e=>{g(e.track)}))}return t}(this)}}),"addVideoTrack"in e.prototype||(e.prototype.addVideoTrack=function(e,t="",n=""){const a=new l;return a.kind=e,a.label=t,a.language=n,i(this,a),a}),"removeVideoTrack"in e.prototype||(e.prototype.removeVideoTrack=a),"addAudioTrack"in e.prototype||(e.prototype.addAudioTrack=function(e,t="",n=""){const i=new f;return i.kind=e,i.label=t,i.language=n,v(this,i),i}),"removeAudioTrack"in e.prototype||(e.prototype.removeAudioTrack=g),"videoRenditions"in e.prototype||Object.defineProperty(e.prototype,"videoRenditions",{get(){return c(this)}});const c=e=>{let t=n(e).videoRenditions;return t||(t=new o,n(t).media=e,n(e).videoRenditions=t),t};"audioRenditions"in e.prototype||Object.defineProperty(e.prototype,"audioRenditions",{get(){return s(this)}});const s=e=>{let t=n(e).audioRenditions;return t||(t=new k,n(t).media=e,n(e).audioRenditions=t),t};return e}function E(e,t){if(e?.prototype)return Object.getOwnPropertyDescriptor(e.prototype,`${t}Tracks`)?.get}export{u as AudioRendition,k as AudioRenditionList,f as AudioTrack,b as AudioTrackList,C as MediaTracksMixin,d as RenditionEvent,e as TrackEvent,s as VideoRendition,o as VideoRenditionList,l as VideoTrack,r as VideoTrackList};export default null;
//# sourceMappingURL=/sm/11c439364bbdf39aff5b3d8a37cb8df2b5217dd0dda18a97372edcb2afb8eb3f.map